openapi: 3.1.0
info:
  title: Pokemon API
  version: 1.0.0
  description: API for retrieving Pokemon data
#servers:
#  - url: http://www.pokemondb.com
#    description: Pokemon Database

paths:
  /pokemon/search:
    get:
      summary: Get Pokemon by name
      description: Retrieves a Pokemon's details based on their unique name.
      parameters:
        - name: name
          in: query
          required: true
          description: Name of the Pokemon to retrieve
          schema:
            type: string
            example: Pikachu
      responses:
        200:
          description: Successfully retrieved Pokemon
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PokemonDto'
              examples:
                example-1:
                  $ref: '#/components/schemas/PokemonDto'
        400:
          description: Didn't pass Id or Name
          content:
            application/json:
              examples:
                example-1:
                  value: null
        404:
          description: Pokemon not found
          content:
            application/json:
              examples:
                example-1:
                  $ref: "#/components/examples/PokemonNotFoundByNameException"
  /pokemon/add:
    post:
      summary: Adds a new Pokemon
      description: 'Based on the validity of the region(could be name or id)
      it will search the region and add it to the mentioned information for the pokemon'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PokemonDto"
      responses:
        201:
          description: Pokemon Created Successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PokemonDto'
              examples:
                example-1:
                  $ref: '#/components/schemas/PokemonDto'
        400:
          description: PokemonDto was not passed correctly
          content:
            application/json:
              examples:
                example-1:
                  $ref: "#/components/examples/EmptyPokemonExample"
        404:
          description: Pokemon not found
          content:
            application/json:
              examples:
                example-1:
                  $ref: "#/components/examples/PokemonRegionNameNotFoundNotFoundException"


components:
  schemas:
    PokemonType:
      type: string
      description: "Available Pok√©mon types"
      enum:
        - FIRE
        - WATER
        - GRASS
        - NORMAL
        - ELECTRIC
        - FLYING
        - FIGHTING
        - POISON
        - GROUND
        - PSYCHIC
        - ROCK
        - ICE
        - BUG
        - DRAGON
        - GHOST
        - DARK
        - STEEL
        - FAIRY
        - STELLAR
    PokemonDto:
      type: object
      properties:
        name:
          type: string
          example: Charizard
        level:
          type: integer
          example: 10
        ability:
          type: string
          example: Blaze
        pokemonTypes:
          type: array
          items:
            $ref: "#/components/schemas/PokemonType"
          example:
            - FIRE
            - DRAGON
        regionName:
          type: string
          example: Kanto
        regionId:
          type: integer
          example: 1
  examples:
    PokemonNotFoundByNameException:
      value:
        httpStatusCode: NOT_FOUND
        message: Pokemon with name 'Pika' was not found.
    PokemonRegionNameNotFoundNotFoundException:
      value:
        httpStatusCode: NOT_FOUND
        message: Pokemon region with name 'Pika' was not found.
    EmptyPokemonExample:
      value:
        name: must not be blank
        level: must be greater than or equal to 10
        ability: must not be blank
        pokemonTypes: must not be empty
        regionName: must not be blank